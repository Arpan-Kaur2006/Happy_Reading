<!DOCTYPE html>
<html>

<head>
    <title>Happy Reading</title>
    <link rel="stylesheet" href="style.css">

<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">ðŸ“š Happy Reading</div>
        <div class="nav-item active" onclick="switchView('dashboard')">Dashboard</div>
        <div class="nav-item" onclick="switchView('library')">My Library</div>
        <div class="nav-item" onclick="switchView('categories')">Categories</div>

        <div class="theme-toggle" onclick="toggleTheme()">
            ðŸŒ™ Toggle Theme
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">

        <!-- DASHBOARD VIEW -->
        <div id="view-dashboard">
            <div class="header">
                <div class="page-title">Dashboard</div>
                <button class="btn-primary" onclick="showUploadModal()">+ Add Book</button>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="stat-books">0</div>
                    <div class="stat-label">Books Collected</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-pages">0</div>
                    <div class="stat-label">Pages Read</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-streak">0 ðŸ”¥</div>
                    <div class="stat-label">Day Streak</div>
                </div>
            </div>

            <div class="dashboard-sections">
                <div class="dash-section">
                    <h3>Books to Read <span class="text-muted" style="font-size:0.8em; font-weight:normal">(< 5%)</span>
                    </h3>
                    <div id="dash-toread" class="book-grid"></div>
                </div>

                <div class="dash-section">
                    <h3>Currently Reading <span class="text-muted" style="font-size:0.8em; font-weight:normal">(5% -
                            90%)</span></h3>
                    <div id="dash-reading" class="book-grid"></div>
                </div>

                <div class="dash-section">
                    <h3>Finished <span class="text-muted" style="font-size:0.8em; font-weight:normal">(> 90%)</span>
                    </h3>
                    <div id="dash-finished" class="book-grid"></div>
                </div>
            </div>
        </div>

        <!-- LIBRARY VIEW -->
        <div id="view-library" class="hidden">
            <div class="header">
                <div class="page-title">Library</div>
                <button class="btn-primary" onclick="showUploadModal()">+ Add Book</button>
            </div>

            <div id="library-content">
                <!-- In Progress, To Read, Completed sections generated by JS -->
            </div>
        </div>

        <!-- CATEGORIES VIEW (Placeholder for now) -->
        <div id="view-categories" class="hidden">
            <div class="header">
                <div class="page-title">Manage Categories</div>
                <button class="btn-primary" onclick="addCategory()">+ New Category</button>
            </div>
            <div id="categories-list"></div>
        </div>

    </div>

    <!-- Upload Modal -->
    <div id="uploadModal" class="modal hidden">
        <div class="modal-content">
            <h3 style="margin-top:0">Add New Book</h3>

            <div class="input-group">
                <label>Book File (PDF or EPUB)</label>
                <input type="file" id="pdfUpload" accept=".pdf,.epub">
            </div>

            <div class="input-group">
                <label>Category</label>
                <select id="categorySelect">
                    <option value="General">General</option>
                </select>
            </div>

            <div style="display:flex; justify-content:flex-end">
                <button class="btn-secondary" onclick="hideUploadModal()">Cancel</button>
                <button class="btn-primary" onclick="uploadBook()">Add to Library</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal hidden" onclick="if(event.target === this) hideDeleteModal()">
        <div class="modal-content">
            <h3 style="margin-top:0">Delete Book?</h3>
            <p>This action cannot be undone.</p>

            <div style="display:flex; justify-content:flex-end; gap: 10px; margin-top: 20px;">
                <button class="btn-secondary" onclick="hideDeleteModal()">Cancel</button>
                <button class="btn-danger" onclick="confirmDelete()">Delete</button>
            </div>
        </div>
    </div>

    <!-- Libraries for Cover Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/epubjs/dist/epub.min.js"></script>

    <script src="storage.js"></script>
    <script src="script.js"></script>
</body>